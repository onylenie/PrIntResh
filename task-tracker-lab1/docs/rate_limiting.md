# Ограничение частоты запросов (Rate Limiting)

API использует механизм ограничения количества запросов для защиты от перегрузки и злоупотреблений.


## Принцип работы
Каждому пользователю выдаётся квота запросов на небольшой интервал времени.  
Если лимит превышён сервер возвращает: 429 Too Many Requests


## Реализация в проекте

### v1
Логика реализована функцией `apply_rate_limit(user)`:
- идентификатором выступает `user.id`
- при превышении лимита выбрасывается HTTP 429
- в ответ добавляются заголовки:
  - `X-Limit-Limit`
  - `X-Limit-Remaining`
  - `Retry-After`

### v2
Используется единый механизм `set_rate_headers(response, ...)`.  
Заголовки выставляются в каждом ответе автоматически.

## Заголовки ограничения
Каждый ответ содержит:
X-Limit-Limit: максимальное число запросов в период
X-Limit-Remaining: сколько осталось
Retry-After: через сколько секунд лимит обновится


## Цель
- защита API от перегрузки  
- равномерное распределение нагрузки  
- предотвращение флуд-атак  


